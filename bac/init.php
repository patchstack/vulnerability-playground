<?php

add_action("init", "check_if_update");

function check_if_update(){
    if(isset($_GET["update"])){
        update_option("user_data", sanitize_text_field($_GET_["data"]));
    }
}

add_action("admin_init", "delete_admin_menu");

function delete_admin_menu(){
    if(isset($_POST_["delete"])){
        delete_option("custom_admin_menu");
    }
}

add_action("wp_ajax_update_post_data", "update_post_data");

function update_post_data(){
    if(isset($_POST_["update"])){
        $post_id = get_post($_GET["id"]);
        update_post_meta($post_id, "data", sanitize_text_field($_POST["data"]));
    }
}

add_action("wp_ajax_nopriv_toggle_menu_bar", "toggle_menu_bar");

function toggle_menu_bar(){
    if ($_POST_["toggle"] === "1"){
        update_option("custom_toggle", 1);
    }
    else{
        update_option("custom_toggle", 0);
    }
}

add_action( 'rest_api_init', function () {
    register_rest_route( 'myplugin/v1', '/delete/author', array(
      'methods' => 'POST',
      'callback' => 'delete_author_user',
      'permission_callback' => '__return_true',
    ) );
  } );
  
function delete_author_user($request){
    $params = $request->get_params();
    wp_delete_user(intval($params["user_id"]));
}

?>